<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Asmaas Wunderland</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        /* -------------------------------------------
         * GRUNDLEGENDE DEFINITIONEN
         * ------------------------------------------- */
        html, body {
            height: 100%; 
            margin: 0; 
            padding: 0; 
            overflow: hidden; 
            background-color: #000;
        }

        /* -------------------------------------------
         * PRELOADER (Unverändert)
         * ------------------------------------------- */
        #preloader {
            position: fixed; top: 0; left: 0; 
            
            /* Preloader auf 9:16 Basis bringen und zentrieren */
            width: 100dvh; 
            height: 100dvh; 
            left: 50%;
            transform: translateX(-50%); 

            background-color: #000; z-index: 9999; 
            display: flex;
            flex-direction: column; 
            justify-content: center; 
            align-items: center;
            color: #fff; font-size: 1.5em; opacity: 1;
            transition: opacity 1.5s ease-out; 
            pointer-events: all; 
            font-family: sans-serif;
            
            box-sizing: border-box;
            padding-top: 20dvh; 
            padding-bottom: 20dvh; 
            text-align: center; 
        }

        #preloader-text-container {
            display: flex;
            flex-direction: column;
            align-items: center; 
            max-width: 80%; 
        }
        
        #preloader-text {
            display: flex; align-items: center; white-space: nowrap; margin-bottom: 10px; 
        }

        #loading-bar-container {
            width: max-content; 
            min-width: 250px; 
            max-width: 100%; 
            height: 8px; 
            background-color: #333; 
            border-radius: 4px; 
            overflow: hidden;
            align-self: center; 
        }

        #loading-bar {
            height: 100%; width: 0%; background-color: #8A2BE2;
            border-radius: 44px; transition: width 0.1s linear; 
        }

        /* -------------------------------------------
         * HAUPT-CONTAINER: FINALE POSITION
         * ------------------------------------------- */
        .website-frame {
            position: absolute;
            height: 100dvh; 
            width: 100dvh; 
            top: 0; 
            left: 50%; 
            overflow: hidden; 
            
            /* Deaktiviert Schwenken (Panning), um ungewollte Verschiebung nach Zoom zu verhindern */
            touch-action: none;
            
            /* FINALE TRANSFORMATION */
            transform-origin: 57.840% 76.321%; 
            transform: translateX(-50%) scale(1.3403); 
            
            /* Übergang für die Überblendung beim Klick */
            transition: opacity 0.8s ease-out; 
            opacity: 1; /* Standardmäßig auf 1 */
        }
        
        /* KLASSE FÜR DIE ÜBERBLENDUNG (WIRD VOM JS BEIM KLICK HINZUGEFÜGT) */
        .fade-out {
            opacity: 0 !important;
        }

        /* -------------------------------------------
         * SLICE STYLES
         * ------------------------------------------- */
        .slice {
            position: absolute;
            box-sizing: border-box;
            display: block;
            margin: -0.05%; 
        }
           
        /* Stil für Link-Slices: Muss position:absolute haben, damit Overlay korrekt positioniert wird */
        .slice.link-slice {
            text-decoration: none; 
            color: inherit;
            position: absolute; /* Wichtig für die korrekte Platzierung des <a>-Containers */
        }

        /* Reguläres Slice Bild (Basis-Slice) */
        .slice img.base-slice { 
            display: block; 
            width: 100%; 
            height: 100%; 
            object-fit: fill; 
        }
        
        /* Overlay Bild (für den Glow Effekt) */
        .slice img.overlay-slice {
            /* Das Overlay muss absolut im <a>-Container liegen und dessen Größe übernehmen */
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: fill;
            opacity: 0; /* Standardmäßig unsichtbar */
            transition: opacity 0.1s ease-out, box-shadow 0.1s ease-out; 
            pointer-events: none; 
        }
        
        /* -------------------------------------------
         * GLOW EFFEKTE (ANGEWENDET AUF DAS OVERLAY)
         * ******************************************* */
         
        /* Das Overlay wird sichtbar, wenn der Glow aktiv ist und erhält den Glow-Effekt */
        .link-slice .overlay-slice.glow {
            opacity: 1;
        }

        /* --- VIDEOS (Slice 12) - Violett/Blau --- */
        .link-slice[data-slice-id='Slice12'] .overlay-slice.glow {
             box-shadow: 0 0 10px 5px rgba(138, 43, 226, 0.7), 0 0 20px 10px rgba(138, 43, 226, 0.4);
        }
        
        /* --- MUSIK (Slice 11) - Pink/Rot --- */
        .link-slice[data-slice-id='Slice11'] .overlay-slice.glow {
             box-shadow: 0 0 10px 5px rgba(255, 0, 150, 0.7), 0 0 20px 10px rgba(255, 0, 150, 0.4);
        }
        
        /* --- SLICE 14 (NUR GLOW, KEIN LINK) - Blau/Hellblau --- */
        .link-slice[data-slice-id='Slice14'] .overlay-slice.glow {
            box-shadow: 0 0 10px 5px rgba(0, 191, 255, 0.7), 0 0 20px 10px rgba(0, 191, 255, 0.4);
        }
        
        /* --- SPIELE (Slice 24) - Grün/Lime --- */
        .link-slice[data-slice-id='Slice24'] .overlay-slice.glow {
             box-shadow: 0 0 10px 5px rgba(0, 255, 0, 0.7), 0 0 20px 10px rgba(0, 255, 0, 0.4);
        }
        
        /* --- DABDOUBI/BÄR (Slice 15) - Warmes Orange/Gelb --- */
        .link-slice[data-slice-id='Slice15'] .overlay-slice.glow {
             box-shadow: 0 0 10px 5px rgba(255, 165, 0, 0.7), 0 0 20px 10px rgba(255, 165, 0, 0.4);
        }

    </style>
</head>
<body>

<div id="preloader">
    <div id="preloader-text-container">
        <div id="preloader-text">
            <span style="font-size: 1.2em; margin-right: 0.5em;">✨</span>
            <span>Betritt Asmaas Wunderland</span>
        </div>
        <div id="loading-bar-container">
            <div id="loading-bar"></div>
        </div>
    </div>
</div>

<div class="website-frame" id="website-frame">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice7.png" style="left: 0%; top: 0%; width: 33.359%; height: 28.418%;" alt="Slice 7 (Oben Links)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice1.jpg" style="left: 33.359%; top: 0%; width: 39.404%; height: 22.656%;" alt="Slice 1 (Mitte Oben)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice8.png" style="left: 72.763%; top: 0%; width: 27.237%; height: 28.418%;" alt="Slice 8 (Oben Rechts)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice9.jpg" style="left: 33.359%; top: 22.656%; width: 6.592%; height: 5.762%;" alt="Slice 9">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice2.png" style="left: 39.951%; top: 22.656%; width: 26.562%; height: 5.762%;" alt="Slice 2 (Webseitentitel/Überschrift)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice10.jpg" style="left: 66.513%; top: 22.656%; width: 6.25%; height: 5.762%;" alt="Slice 10">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice23.png" style="left: 0%; top: 28.418%; width: 33.359%; height: 12.598%;" alt="Slice 23 (Unter Slice 7)">
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice27.jpg" style="left: 33.359%; top: 28.418%; width: 6.592%; height: 6.348%;" alt="Slice 27 (Statisch)">
    
    <a href="https://xanderfoxy.github.io/AsmaasWunderland/Videos" class="slice link-slice" data-slice-id="Slice12" style="left: 39.951%; top: 28.418%; width: 26.562%; height: 6.348%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice12.jpg" alt="Slice 12 (Videosektion, Link zu Videos)">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice12Overlay.png" alt="Slice 12 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice28.jpg" style="left: 66.513%; top: 28.418%; width: 6.25%; height: 6.348%;" alt="Slice 28">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice22.jpg" style="left: 72.763%; top: 28.418%; width: 27.237%; height: 17.432%;" alt="Slice 22 (Unter Slice 8)">
    
    <a href="https://xanderfoxy.github.io/AsmaasWunderland/Musik" class="slice link-slice" data-slice-id="Slice11" style="left: 33.359%; top: 34.766%; width: 14.453%; height: 6.25%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice11.png" alt="Slice 11 (Musiklink)">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice11Overlay.png" alt="Slice 11 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice25.png" style="left: 47.812%; top: 34.766%; width: 6.25%; height: 6.25%;" alt="Slice 25 (Rechts neben Slice 11)">
    
    <a href="https://xanderfoxy.github.io/AsmaasWunderland/Spiele" class="slice link-slice" data-slice-id="Slice24" style="left: 54.062%; top: 34.766%; width: 18.701%; height: 11.084%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice24.png" alt="Slice 24 (Link zu Spiele)">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice24Overlay.png" alt="Slice 24 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice29.jpg" style="left: 0%; top: 41.016%; width: 23.877%; height: 23.047%;" alt="Slice 29 (Unter Slice 23)">
    
    <a href="#" class="slice link-slice" data-slice-id="Slice14" style="left: 23.877%; top: 41.016%; width: 23.926%; height: 23.047%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice14.png" alt="Slice 14 (Fuchs/Elefant)">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice14Overlay.png" alt="Slice 14 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice3.png" style="left: 47.803%; top: 41.016%; width: 6.25%; height: 23.047%;" alt="Slice 3 (Wasserfall - Unter Slice 25)">
    
    <a href="https://xanderfoxy.github.io/Dabdoubi/" class="slice link-slice" data-slice-id="Slice15" style="left: 54.062%; top: 45.84%; width: 35.205%; height: 18.213%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice15.png" alt="Slice 15 (Bärenbild, Link zur Dabdoubi-Seite)">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice15Overlay.png" alt="Slice 15 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice26.jpg" style="left: 89.267%; top: 45.84%; width: 10.733%; height: 18.213%;" alt="Slice 26 (Rechts neben Slice 15)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice16.jpg" style="left: 0%; top: 64.062%; width: 44.775%; height: 35.938%;" alt="Slice 16 (Linke untere Ecke)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice13.png" style="left: 44.775%; top: 64.062%; width: 13.525%; height: 9.668%;" alt="Slice 13 (Oben im Stapel)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice4.png" style="left: 44.775%; top: 73.73%; width: 13.525%; height: 9.863%;" alt="Slice 4">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice6.png" style="left: 44.775%; top: 83.593%; width: 13.525%; height: 14.453%;" alt="Slice 6">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice20.jpg" style="left: 44.775%; top: 98.046%; width: 13.525%; height: 2.002%;" alt="Slice 20 (Unten im Stapel)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice17.jpg" style="left: 58.300%; top: 64.062%; width: 41.700%; height: 16.455%;" alt="Slice 17 (Rechts Oben)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice5.png" style="left: 58.300%; top: 80.517%; width: 14.453%; height: 11.572%;" alt="Slice 5">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice19.jpg" style="left: 58.300%; top: 92.089%; width: 14.453%; height: 7.909%;" alt="Slice 19 (Unten links im Stapel)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice18.jpg" style="left: 72.753%; top: 80.517%; width: 27.247%; height: 19.483%;" alt="Slice 18 (Rechte untere Ecke)">
</div>

<script>
// -------------------------------------------
// JavaScript
// -------------------------------------------

const GLOW_DURATION = 100; // Dauer des Leuchteffekts in ms
const FADE_DURATION = 800; // Dauer der Überblendung in ms

/**
 * Verfolgt den Ladefortschritt der Bilder.
 */
function trackLoadingProgress() {
    const images = document.querySelectorAll('#website-frame img');
    const loadingBar = document.getElementById('loading-bar');
    let loadedCount = 0;
    const totalCount = images.length;
    const MIN_WAIT_TIME = 800;
    const startTime = Date.now();

    if (totalCount === 0) {
        return new Promise(resolve => setTimeout(resolve, MIN_WAIT_TIME));
    }
    
    const updateProgress = () => {
        const progress = (loadedCount / totalCount) * 100;
        loadingBar.style.width = progress + '%';
    };

    const promises = [];

    images.forEach(img => {
        if (!img.complete) {
            promises.push(new Promise(resolve => {
                const onLoadOrError = () => {
                    loadedCount++;
                    updateProgress();
                    resolve();
                };
                img.onload = onLoadOrError;
                img.onerror = onLoadOrError; 
            }));
        } else {
            loadedCount++;
            updateProgress();
        }
    });

    return Promise.all([
        Promise.all(promises),
        new Promise(resolve => {
            const timeElapsed = Date.now() - startTime;
            const remainingTime = MIN_WAIT_TIME - timeElapsed;
            setTimeout(resolve, Math.max(0, remainingTime));
        })
    ]);
}

/**
 * Versteckt den Preloader.
 */
function hidePreloader() {
    const preloader = document.getElementById('preloader');
    
    preloader.style.opacity = '0';
    
    setTimeout(() => {
        preloader.style.display = 'none';
        preloader.style.pointerEvents = 'none'; 
    }, 1500); 
}

/**
 * Behandelt Klicks auf alle Link-Sektionen (a.link-slice).
 * @param {Event} e - Das Klick-Ereignis.
 */
function defaultClickHandler(e) {
    e.preventDefault(); 

    const linkElement = e.currentTarget;
    const targetUrl = linkElement.href;
    
    // Prüfe, ob die URL *keine* Weiterleitung auslösen soll (nur Glow).
    // Dies gilt für alle Slices mit href="#".
    const isGlowOnly = (targetUrl === '#' || targetUrl.indexOf('void(0)') !== -1);
    
    const overlaySlice = linkElement.querySelector('.overlay-slice');
    const websiteFrame = document.getElementById('website-frame');

    // 1. GLOW-START
    if (overlaySlice) {
        overlaySlice.classList.add('glow');
    }

    // 2. TIMEOUT für Glow-Dauer
    setTimeout(() => {
        
        if (!isGlowOnly) {
            // Wenn es ein ECHTER Link ist: Überblendung und Weiterleitung
            websiteFrame.classList.add('fade-out');

            setTimeout(() => {
                window.location.href = targetUrl;
            }, FADE_DURATION);
            
        } else {
            // Wenn es NUR Glow ist (z.B. Slice 14): Glow entfernen
            if (overlaySlice) {
                overlaySlice.classList.remove('glow');
            }
        }

    }, GLOW_DURATION);
}

/**
 * Behebt das Problem mit dem schwarzen Bildschirm beim Klick auf "Zurück".
 * WICHTIG: setTimeout (0) stellt sicher, dass der Cache-Zustand zuverlässig aktualisiert wird.
 */
window.addEventListener('pageshow', (event) => {
    if (event.persisted) {
        const websiteFrame = document.getElementById('website-frame');
        
        setTimeout(() => {
            websiteFrame.classList.remove('fade-out');
            
            // Entferne alle Glow-Klassen
            document.querySelectorAll('.overlay-slice.glow').forEach(el => {
                el.classList.remove('glow');
            });
        }, 0); 
    }
});


document.addEventListener('DOMContentLoaded', () => {
    // Füge den Klick-Handler zu allen Link-Slices hinzu
    const linkSlices = document.querySelectorAll('.link-slice');
    linkSlices.forEach(link => {
        link.addEventListener('click', defaultClickHandler);
    });
    
    // Starte den Preloader
    trackLoadingProgress().then(() => {
        hidePreloader();
    });
});
</script>

</body>
</html>
