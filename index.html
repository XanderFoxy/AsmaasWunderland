<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Asmaas Wunderland</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        /* -------------------------------------------
         * GRUNDLEGENDE DEFINITIONEN
         * ------------------------------------------- */
        html, body {
            height: 100%; 
            margin: 0; 
            padding: 0; 
            overflow: hidden; 
            background-color: #000;
        }

        /* -------------------------------------------
         * PRELOADER (FIXED FÜR MOBILE ABDECKUNG)
         * ------------------------------------------- */
        #preloader {
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            
            background-color: #000; z-index: 9999; 
            display: flex;
            flex-direction: column; 
            justify-content: center; 
            align-items: center;
            color: #fff; font-size: 1.5em; opacity: 1;
            transition: opacity 1.5s ease-out; 
            pointer-events: all; 
            font-family: sans-serif;
            
            box-sizing: border-box;
            padding-top: 20dvh; 
            padding-bottom: 20dvh; 
            text-align: center; 
        }

        /* -------------------------------------------
         * HAUPT-CONTAINER: FINALE POSITION UND ZOOM/GLOW
         * ------------------------------------------- */
        .website-frame {
            position: absolute;
            height: 100dvh; 
            width: 100dvh; 
            top: 0; 
            left: 50%; 
            overflow: hidden; 
            
            touch-action: none;
            
            /* ZOOM-FAHRT WIEDERHERGESTELLT */
            transform-origin: 57.840% 76.321%; 
            transform: translateX(-50%) scale(1.3403); 
            
            /* LANGE TRANSITION FÜR DEN WEICHEN, EDLEN ÜBERGANG */
            transition: opacity 2.0s ease-out, filter 2.0s ease-out; 
            opacity: 1;
        }
        
        /* NEUER FRAME-GLOW FÜR DAS GESAMTE ELEMENT */
        .website-frame.frame-glow {
            /* Goldgelber, sanfter Glow um den ganzen Rahmen */
            filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.4)) drop-shadow(0 0 30px rgba(255, 215, 0, 0.2));
        }
        
        .fade-out {
            opacity: 0 !important;
        }

        /* -------------------------------------------
         * SLICE STYLES
         * ------------------------------------------- */
        .slice {
            position: absolute;
            box-sizing: border-box;
            display: block;
            margin: 0; /* Margin entfernt, da es zu Lücken führte */
        }
           
        .slice.link-slice {
            text-decoration: none; 
            color: inherit;
            position: absolute;
            touch-action: manipulation; 
        }

        /* Basis-Slice (Der normale Inhalt) */
        .slice img.base-slice { 
            display: block; 
            width: 100%; 
            height: 100%; 
            object-fit: fill; 
        }
        
        /* Overlay Bild (NUR FÜR DIE GLOW-ELEMENTE WIEDERHERGESTELLT) */
        .slice img.overlay-slice {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: fill;
            
            opacity: 0.01; 
            
            /* STANDARD-TRANSITION FÜR DIE LINKS (SCHNELLER GLOW) */
            transition: filter 0.15s ease-out, opacity 0.15s ease-out; 
            pointer-events: none; 
            
            /* FIX FÜR IPAD ZITTERN: GPU-Beschleunigung erzwingen */
            transform: translateZ(0); 
        }
        
        /* -------------------------------------------
         * GLOW EFFEKTE (ANGEWENDET AUF DAS OVERLAY)
         * ******************************************* */
         
        /* Das Overlay wird beim Klick sichtbar (opacity) und erhält den Glow (filter) */
        .link-slice .overlay-slice.glow {
            opacity: 1;
        }

        /* --- SLICE 14 (MAGISCHER GLOW) - LANGE TRANSITION FÜR SEHR WEICHES AUSFADEN --- */
        .link-slice[data-slice-id='Slice14'] .overlay-slice {
            /* 4 Sekunden Übergangsdauer für das sanfte, langsame Abklingen */
            transition: filter 4.0s ease-out, opacity 0.15s ease-out; 
        }
        .link-slice[data-slice-id='Slice14'] .overlay-slice.glow {
            /* Glow stärker und breiter */
            filter: drop-shadow(0 0 20px rgba(0, 191, 255, 0.9)) drop-shadow(0 0 40px rgba(0, 191, 255, 0.7));
        }
        
        /* --- VIDEOS (Slice 12) - GLOW STÄRKER & BREITER --- */
        .link-slice[data-slice-id='Slice12'] .overlay-slice.glow {
             filter: drop-shadow(0 0 25px rgba(138, 43, 226, 1)) drop-shadow(0 0 50px rgba(138, 43, 226, 0.8));
        }
        
        /* --- MUSIK (Slice 11) - GLOW STÄRKER & BREITER (für Vogel) --- */
        .link-slice[data-slice-id='Slice11'] .overlay-slice.glow {
             filter: drop-shadow(0 0 25px rgba(255, 0, 150, 1)) drop-shadow(0 0 50px rgba(255, 0, 150, 0.8));
        }

        /* --- SPIELE (Slice 24) - Standard Glow beibehalten, aber leicht verstärkt --- */
        .link-slice[data-slice-id='Slice24'] .overlay-slice.glow {
             filter: drop-shadow(0 0 20px rgba(0, 255, 0, 0.9)) drop-shadow(0 0 40px rgba(0, 255, 0, 0.6));
        }
        
        /* --- DABDOUBI/BÄR (Slice 15) - Standard Glow beibehalten, aber leicht verstärkt --- */
        .link-slice[data-slice-id='Slice15'] .overlay-slice.glow {
             filter: drop-shadow(0 0 20px rgba(255, 165, 0, 0.9)) drop-shadow(0 0 40px rgba(255, 165, 0, 0.6));
        }

    </style>
</head>
<body>

<audio id="sound-Slice11" src="https://xanderfoxy.github.io/AsmaasWunderland/Sounds/Musik.mp3" preload="auto"></audio>
<audio id="sound-Slice12" src="https://xanderfoxy.github.io/AsmaasWunderland/Sounds/Videos.mp3" preload="auto"></audio>
<audio id="sound-Slice14" src="https://xanderfoxy.github.io/AsmaasWunderland/Sounds/Slice14.mp3" preload="auto"></audio>
<audio id="sound-Slice15" src="https://xanderfoxy.github.io/AsmaasWunderland/Sounds/Bilder.mp3" preload="auto"></audio>
<audio id="sound-Slice24" src="https://xanderfoxy.github.io/AsmaasWunderland/Sounds/Spiele.mp3" preload="auto"></audio>


<div id="preloader">
    <div id="preloader-text-container">
        <div id="preloader-text">
            <span style="font-size: 1.2em; margin-right: 0.5em;">✨</span>
            <span>Betritt Asmaas Wunderland</span>
        </div>
        <div id="loading-bar-container">
            <div id="loading-bar"></div>
        </div>
    </div>
</div>

<div class="website-frame frame-glow" id="website-frame">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice7.png" style="left: 0%; top: 0%; width: 33.359%; height: 28.418%;" alt="Slice 7 (Oben Links)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice1.jpg" style="left: 33.359%; top: 0%; width: 39.404%; height: 22.656%;" alt="Slice 1 (Mitte Oben)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice8.png" style="left: 72.763%; top: 0%; width: 27.237%; height: 28.418%;" alt="Slice 8 (Oben Rechts)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice9.jpg" style="left: 33.359%; top: 22.656%; width: 6.592%; height: 5.762%;" alt="Slice 9">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice2.png" style="left: 39.951%; top: 22.656%; width: 26.562%; height: 5.762%;" alt="Slice 2 (Webseitentitel/Überschrift)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice10.jpg" style="left: 66.513%; top: 22.656%; width: 6.25%; height: 5.762%;" alt="Slice 10">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice23.png" style="left: 0%; top: 28.418%; width: 33.359%; height: 12.598%;" alt="Slice 23 (Unter Slice 7)">
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice27.jpg" style="left: 33.359%; top: 28.418%; width: 6.592%; height: 6.348%;" alt="Slice 27 (Statisch)">
    
    <a href="https://xanderfoxy.github.io/AsmaasWunderland/Videos" class="slice link-slice" data-slice-id="Slice12" style="left: 39.951%; top: 28.418%; width: 26.572%; height: 6.358%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice12.png" alt="Slice 12 Basis">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice12Overlay.png" alt="Slice 12 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice28.jpg" style="left: 66.513%; top: 28.418%; width: 6.25%; height: 6.348%;" alt="Slice 28">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice22.jpg" style="left: 72.763%; top: 28.418%; width: 27.237%; height: 17.432%;" alt="Slice 22 (Unter Slice 8)">
    
    <a href="https://xanderfoxy.github.io/AsmaasWunderland/Musik" class="slice link-slice" data-slice-id="Slice11" style="left: 33.359%; top: 34.766%; width: 14.463%; height: 6.26%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice11.png" alt="Slice 11 Basis">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice11Overlay.png" alt="Slice 11 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice25.png" style="left: 47.812%; top: 34.766%; width: 6.25%; height: 6.25%;" alt="Slice 25 (Rechts neben Slice 11)">
    
    <a href="https://xanderfoxy.github.io/AsmaasWunderland/Spiele" class="slice link-slice" data-slice-id="Slice24" style="left: 54.062%; top: 34.766%; width: 18.711%; height: 11.094%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice24.png" alt="Slice 24 Basis">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice24Overlay.png" alt="Slice 24 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice29.jpg" style="left: 0%; top: 41.016%; width: 23.877%; height: 23.047%;" alt="Slice 29 (Unter Slice 23)">
    
    <a href="javascript:void(0);" class="slice link-slice" data-slice-id="Slice14" style="left: 23.877%; top: 41.016%; width: 23.936%; height: 23.057%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice14.png" alt="Slice 14 Basis">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice14Overlay.png" alt="Slice 14 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice3.png" style="left: 47.803%; top: 41.016%; width: 6.25%; height: 23.047%;" alt="Slice 3 (Wasserfall - Unter Slice 25)">
    
    <a href="https://xanderfoxy.github.io/Dabdoubi/" class="slice link-slice" data-slice-id="Slice15" style="left: 54.062%; top: 45.84%; width: 35.215%; height: 18.223%;">
        <img class="base-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice15.png" alt="Slice 15 Basis">
        <img class="overlay-slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice15Overlay.png" alt="Slice 15 Overlay">
    </a>
    
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice26.jpg" style="left: 89.267%; top: 45.84%; width: 10.733%; height: 18.213%;" alt="Slice 26 (Rechts neben Slice 15)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice16.jpg" style="left: 0%; top: 64.062%; width: 44.775%; height: 35.938%;" alt="Slice 16 (Linke untere Ecke)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice13.png" style="left: 44.775%; top: 64.062%; width: 13.525%; height: 9.668%;" alt="Slice 13 (Oben im Stapel)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice4.png" style="left: 44.775%; top: 73.73%; width: 13.525%; height: 9.863%;" alt="Slice 4">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice6.png" style="left: 44.775%; top: 83.593%; width: 13.525%; height: 14.453%;" alt="Slice 6">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice20.jpg" style="left: 44.775%; top: 98.046%; width: 13.525%; height: 2.002%;" alt="Slice 20 (Unten im Stapel)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice17.jpg" style="left: 58.300%; top: 64.062%; width: 41.700%; height: 16.455%;" alt="Slice 17 (Rechts Oben)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice5.png" style="left: 58.300%; top: 80.517%; width: 14.453%; height: 11.572%;" alt="Slice 5">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice19.jpg" style="left: 58.300%; top: 92.089%; width: 14.453%; height: 7.909%;" alt="Slice 19 (Unten links im Stapel)">
    <img class="slice" src="https://xanderfoxy.github.io/AsmaasWunderland/Slices/Slice18.jpg" style="left: 72.753%; top: 80.517%; width: 27.247%; height: 19.483%;" alt="Slice 18 (Rechte untere Ecke)">
</div>

<script>
// -------------------------------------------
// JavaScript
// -------------------------------------------

const GLOW_DURATION_DEFAULT = 150; 
// SLICE 14 GLOW: Javascript entfernt die Klasse fast sofort (100ms), 
// die CSS-Transition (4.0s) sorgt für den langen, weichen Fade-Out.
const GLOW_DURATION_MAGIC = 100; 
// LANGE DAUER FÜR DEN EDLEN, LANGSAMEN WEITERLEITUNGS-FADE (2 Sekunden)
const FADE_DURATION_OUT = 2000; 

/**
 * Spielt den Sound für den angegebenen Slice ab.
 */
function playSound(sliceId) {
    const audio = document.getElementById(`sound-${sliceId}`);
    if (audio) {
        audio.currentTime = 0; 
        audio.play().catch(error => {
            console.warn(`Sound für ${sliceId} konnte nicht abgespielt werden:`, error);
        });
    }
}

/**
 * Verfolgt den Ladefortschritt der Bilder. (Unverändert)
 */
function trackLoadingProgress() {
    const images = document.querySelectorAll('#website-frame img');
    const loadingBar = document.getElementById('loading-bar');
    let loadedCount = 0;
    const totalCount = images.length;
    const MIN_WAIT_TIME = 800;
    const startTime = Date.now();

    if (totalCount === 0) {
        return new Promise(resolve => setTimeout(resolve, MIN_WAIT_TIME));
    }
    
    const updateProgress = () => {
        const progress = (loadedCount / totalCount) * 100;
        loadingBar.style.width = progress + '%';
    };

    const promises = [];

    images.forEach(img => {
        if (!img.complete) {
            promises.push(new Promise(resolve => {
                const onLoadOrError = () => {
                    loadedCount++;
                    updateProgress();
                    resolve();
                };
                img.onload = onLoadOrError;
                img.onerror = onLoadOrError; 
            }));
        } else {
            loadedCount++;
            updateProgress();
        }
    });

    return Promise.all([
        Promise.all(promises),
        new Promise(resolve => {
            const timeElapsed = Date.now() - startTime;
            const remainingTime = MIN_WAIT_TIME - timeElapsed;
            setTimeout(resolve, Math.max(0, remainingTime));
        })
    ]);
}

/**
 * Versteckt den Preloader und startet den Frame-Glow.
 */
function hidePreloader() {
    const preloader = document.getElementById('preloader');
    const websiteFrame = document.getElementById('website-frame');

    // Entfernt den Preloader
    preloader.style.opacity = '0';
    
    // Nach dem Preloader-Fade-Out (1.5s)
    setTimeout(() => {
        preloader.style.display = 'none';
        preloader.style.pointerEvents = 'none'; 
        
        // Fügt den Frame-Glow hinzu, nachdem der Preloader weg ist
        websiteFrame.classList.add('frame-glow');
    }, 1500); 
}

/**
 * Behandelt Klicks auf alle Link-Sektionen (a.link-slice).
 */
function defaultClickHandler(e) {
    e.preventDefault(); 

    const linkElement = e.currentTarget;
    const targetUrl = linkElement.href;
    const sliceId = linkElement.getAttribute('data-slice-id');
    
    // Prüfe, ob die URL *keine* Weiterleitung auslösen soll (nur Glow).
    const isGlowOnly = (targetUrl === 'javascript:void(0);' || targetUrl === '#');
    
    const overlaySlice = linkElement.querySelector('.overlay-slice');
    const websiteFrame = document.getElementById('website-frame');
    
    // Setze die Dauer für den Glow 
    const glowDuration = (sliceId === 'Slice14') ? GLOW_DURATION_MAGIC : GLOW_DURATION_DEFAULT;

    // 0. Sound abspielen
    playSound(sliceId);

    // 1. GLOW-START
    if (overlaySlice) {
        overlaySlice.classList.add('glow');
    }

    // 2. TIMEOUT für Glow-Dauer
    setTimeout(() => {
        
        if (!isGlowOnly) {
            // ECHTER Link: Starte den langsamen, edlen Überblendungs-Effekt
            
            // Entferne den Frame-Glow für den Überblendungseffekt
            websiteFrame.classList.remove('frame-glow');
            
            // Starte den Fade-Out
            websiteFrame.classList.add('fade-out');

            setTimeout(() => {
                // Weiterleitung erfolgt erst nach Ende des Fades
                window.location.href = targetUrl;
            }, FADE_DURATION_OUT);
            
        } else {
            // NUR Glow: Glow entfernen (CSS-Transition übernimmt das sehr langsame Ausfaden)
            if (overlaySlice) {
                overlaySlice.classList.remove('glow');
            }
        }

    }, glowDuration);
}

/**
 * Behebt das Problem mit dem schwarzen Bildschirm beim Klick auf "Zurück".
 */
window.addEventListener('pageshow', (event) => {
    if (event.persisted) {
        const websiteFrame = document.getElementById('website-frame');
        
        setTimeout(() => {
            websiteFrame.classList.remove('fade-out');
            
            // Füge den Frame-Glow wieder hinzu
            websiteFrame.classList.add('frame-glow');
            
            // Entferne alle Slice-Glow-Klassen
            document.querySelectorAll('.overlay-slice.glow').forEach(el => {
                el.classList.remove('glow');
            });
        }, 0); 
    }
});


document.addEventListener('DOMContentLoaded', () => {
    // Füge den Klick-Handler zu allen Link-Slices hinzu
    const linkSlices = document.querySelectorAll('.link-slice');
    linkSlices.forEach(link => {
        link.addEventListener('click', defaultClickHandler);
    });
    
    // Starte den Preloader
    trackLoadingProgress().then(() => {
        hidePreloader();
    });
});
</script>

</body>
</html>
